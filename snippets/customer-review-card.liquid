{% comment %}
  Customer Review Card Snippet
  Renders a review card with name, verified badge, stars, and review text
  
  Usage:
  {% render 'customer-review-card', block: block %}
{% endcomment %}

<div class="customer-review-card-wrapper" {{ block.shopify_attributes }} style="--margin-top: {{ block.settings.margin_top | divided_by: 10.0 }}rem;--margin-bottom: {{ block.settings.margin_bottom | divided_by: 10.0 }}rem;">
  <style>
    /* ===========================
       Review Card Container
       =========================== */
    .customer-review-card-wrapper {
      margin-top: var(--margin-top);
      margin-bottom: var(--margin-bottom);
    }

    .customer-review-card {
      {% if block.settings.card_gradient_enabled %}
        background: {{ block.settings.card_gradient }};
      {% else %}
        background-color: {{ block.settings.card_background }};
      {% endif %}
      padding: {{ block.settings.card_padding_vertical }}px {{ block.settings.card_padding_horizontal }}px;
      border: {{ block.settings.card_border_width }}px {{ block.settings.card_border_style }} {{ block.settings.card_border_color }};
      border-radius: {{ block.settings.card_border_radius }}px;
      box-shadow: {{ block.settings.card_shadow }};
      max-width: {{ block.settings.card_max_width }}%;
      margin: 0 auto;
    }

    /* ===========================
       Header Row (Name, Badge, Stars)
       =========================== */
    .review-header {
      display: flex;
      align-items: center;
      gap: {{ block.settings.header_gap }}px;
      margin-bottom: {{ block.settings.header_review_gap }}px;
      flex-wrap: wrap;
    }

    /* ===========================
       Customer Name
       =========================== */
    .customer-name {
      font-size: {{ block.settings.name_size }}px;
      font-weight: {{ block.settings.name_weight }};
      color: {{ block.settings.name_color }};
      margin: 0;
      line-height: 1;
    }

    /* ===========================
       Verified Badge
       =========================== */
    .verified-badge {
      width: {{ block.settings.badge_size }}px;
      height: {{ block.settings.badge_size }}px;
      background-color: {{ block.settings.badge_background }};
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .verified-badge svg {
      width: {{ block.settings.badge_icon_size }}px;
      height: {{ block.settings.badge_icon_size }}px;
      color: {{ block.settings.badge_icon_color }};
    }

    /* ===========================
       Star Rating
       =========================== */
    .star-rating {
      display: flex;
      align-items: center;
      gap: {{ block.settings.star_gap }}px;
      margin-left: auto;
    }

    .star {
      width: {{ block.settings.star_size }}px;
      height: {{ block.settings.star_size }}px;
      color: {{ block.settings.star_color }};
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .star svg {
      width: 100%;
      height: 100%;
    }

    /* ===========================
       Review Text
       =========================== */
    .customer-review-text {
      font-size: {{ block.settings.review_size }}px;
      font-weight: {{ block.settings.review_weight }};
      color: {{ block.settings.review_color }};
      line-height: {{ block.settings.review_line_height }};
      margin: 0;
    }

    /* ===========================
       Mobile Responsive
       =========================== */
    @media screen and (max-width: 749px) {
      .customer-review-card {
        padding: {{ block.settings.card_padding_vertical_mobile }}px {{ block.settings.card_padding_horizontal_mobile }}px;
        max-width: 100%;
      }

      .review-header {
        gap: {{ block.settings.header_gap_mobile }}px;
        margin-bottom: {{ block.settings.header_review_gap_mobile }}px;
      }

      .customer-name {
        font-size: {{ block.settings.name_size_mobile }}px;
      }

      .verified-badge {
        width: {{ block.settings.badge_size_mobile }}px;
        height: {{ block.settings.badge_size_mobile }}px;
      }

      .verified-badge svg {
        width: {{ block.settings.badge_icon_size_mobile }}px;
        height: {{ block.settings.badge_icon_size_mobile }}px;
      }

      .star {
        width: {{ block.settings.star_size_mobile }}px;
        height: {{ block.settings.star_size_mobile }}px;
      }

      .star-rating {
        gap: {{ block.settings.star_gap_mobile }}px;
      }

      .customer-review-text {
        font-size: {{ block.settings.review_size_mobile }}px;
      }
    }
  </style>

  <div class="customer-review-card">
    {% comment %} Header with Name, Badge, and Stars {% endcomment %}
    <div class="review-header">
      <h3 class="customer-name">{{ block.settings.customer_name | default: 'Name' }}</h3>
      
      {% if block.settings.show_verified_badge %}
        <div class="verified-badge">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path fill-rule="evenodd" d="M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12a4.49 4.49 0 01-1.549 3.397 4.491 4.491 0 01-1.307 3.498 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.307 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.498 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd"/>
          </svg>
        </div>
      {% endif %}

      <div class="star-rating">
        {% for i in (1..5) %}
          <div class="star">
            {% if i <= block.settings.star_count %}
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd"/>
              </svg>
            {% else %}
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"/>
              </svg>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>

    {% comment %} Review Text {% endcomment %}
    {% if block.settings.review_text != blank %}
      <p class="customer-review-text">{{ block.settings.review_text }}</p>
    {% endif %}
  </div>
</div>
